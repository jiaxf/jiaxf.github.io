<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>飞天雪的技术博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="jiaxf&apos;s blog | js | node | javascript">
<meta property="og:type" content="website">
<meta property="og:title" content="飞天雪的技术博客">
<meta property="og:url" content="http://jiaxf.github.io/index.html">
<meta property="og:site_name" content="飞天雪的技术博客">
<meta property="og:description" content="jiaxf&apos;s blog | js | node | javascript">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="飞天雪的技术博客">
<meta name="twitter:description" content="jiaxf&apos;s blog | js | node | javascript">
  
    <link rel="alternative" href="/atom.xml" title="飞天雪的技术博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/linux.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="jiaxf欢迎您来访！">Jiaxf</a></h1>
        </hgroup>

        
        <p class="header-subtitle">技术无止境</p>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="search" placeholder=" Search...">
            </form>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/archives">技术文摘</a></li>
                        
                            <li><a href="/works">前端集锦</a></li>
                        
                            <li><a href="/readings">阅读书单</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="mailto:jiaxuefeng0@gmail.com" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/jiaxf" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://zhihu.com/people/jia-xue-feng-0" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/jiaxuefeng" title="weibo">weibo</a>
                            
                                <a class="fl linkedin" target="_blank" href="http://cn.linkedin.com/in/jiaxuefeng" title="linkedin">linkedin</a>
                            
                                <a class="fl rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                                <a class="fl douban" target="_blank" href="https://www.douban.com/people/54387876/" title="douban">douban</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Base64/" style="font-size: 10px;">Base64</a> <a href="/tags/Let-s-Encrypt/" style="font-size: 10px;">Let's Encrypt</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/functional/" style="font-size: 17.5px;">functional</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/https/" style="font-size: 11.25px;">https</a> <a href="/tags/java/" style="font-size: 11.25px;">java</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/jsx/" style="font-size: 10px;">jsx</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/md5/" style="font-size: 10px;">md5</a> <a href="/tags/mysql/" style="font-size: 11.25px;">mysql</a> <a href="/tags/node/" style="font-size: 11.25px;">node</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pattern/" style="font-size: 10px;">pattern</a> <a href="/tags/php/" style="font-size: 11.25px;">php</a> <a href="/tags/ramda/" style="font-size: 16.25px;">ramda</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/redis/" style="font-size: 13.75px;">redis</a> <a href="/tags/spring/" style="font-size: 11.25px;">spring</a> <a href="/tags/web/" style="font-size: 11.25px;">web</a> <a href="/tags/函数式编程/" style="font-size: 12.5px;">函数式编程</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/加密/" style="font-size: 11.25px;">加密</a> <a href="/tags/区块链/" style="font-size: 10px;">区块链</a> <a href="/tags/技术/" style="font-size: 18.75px;">技术</a> <a href="/tags/服务器/" style="font-size: 10px;">服务器</a> <a href="/tags/生活乐趣/" style="font-size: 10px;">生活乐趣</a> <a href="/tags/算法/" style="font-size: 11.25px;">算法</a> <a href="/tags/缓存/" style="font-size: 12.5px;">缓存</a> <a href="/tags/解密/" style="font-size: 11.25px;">解密</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">luuman</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">码农一枚，追求极客！</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=13578845068435931330' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Jiaxf</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/linux.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Jiaxf</a></h1>
            </hgroup>
            
            <p class="header-subtitle">技术无止境</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/archives">技术文摘</a></li>
                
                    <li><a href="/works">前端集锦</a></li>
                
                    <li><a href="/readings">阅读书单</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="mailto:jiaxuefeng0@gmail.com" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/jiaxf" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://zhihu.com/people/jia-xue-feng-0" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/jiaxuefeng" title="weibo">weibo</a>
                    
                        <a class="linkedin" target="_blank" href="http://cn.linkedin.com/in/jiaxuefeng" title="linkedin">linkedin</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                        <a class="douban" target="_blank" href="https://www.douban.com/people/54387876/" title="douban">douban</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Let&#39;s Encrypt通配符证书开启HTTPS" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/12/Let's Encrypt通配符证书开启HTTPS/" class="article-date">
      <time datetime="2018-06-12T07:50:50.000Z" itemprop="datePublished">2018-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/12/Let's Encrypt通配符证书开启HTTPS/">获取Let‘sEncrypt免费证书.md</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Let’s-Encrypt通配符证书开启HTTPS"><a href="#Let’s-Encrypt通配符证书开启HTTPS" class="headerlink" title="Let’s Encrypt通配符证书开启HTTPS"></a>Let’s Encrypt通配符证书开启HTTPS</h1><h2 id="什么是Let’s-Encrypt"><a href="#什么是Let’s-Encrypt" class="headerlink" title="什么是Let’s Encrypt?"></a>什么是Let’s Encrypt?</h2><p>部署 HTTPS 网站的时候需要证书，证书由 CA 机构签发，大部分传统 CA 机构签发证书是需要收费的，这不利于推动 HTTPS 协议的使用。</p>
<p>Let’s Encrypt 也是一个 CA 机构，但这个 CA 机构是免费的！也就是说签发证书不需要任何费用。</p>
<h2 id="什么是通配符证书"><a href="#什么是通配符证书" class="headerlink" title="什么是通配符证书"></a>什么是通配符证书</h2><p>在没有出现通配符证书之前，Let’s Encrypt 支持两种证书。</p>
<p>1）单域名证书：证书仅仅包含一个主机。</p>
<p>2）SAN 证书：一张证书可以包括多个主机（Let’s Encrypt 限制是 20），也就是证书可以包含下列的主机：<a href="http://www.example.com、www.example.cn、blog.example.com" target="_blank" rel="noopener">www.example.com、www.example.cn、blog.example.com</a> 等等。</p>
<p>证书包含的主机可以不是同一个注册域，不要问我注册域是什么？注册域就是向域名注册商购买的域名。</p>
<p>对于个人用户来说，由于主机并不是太多，所以使用 SAN 证书完全没有问题，但是对于大公司来说有一些问题：</p>
<p>子域名非常多，而且过一段时间可能就要使用一个新的主机。</p>
<p>注册域也非常多。</p>
<p>读者可以思考下，对于大企业来说，SAN 证书可能并不能满足需求，类似于 sina 这样的网站，所有的主机全部包含在一张证书中，而使用 Let’s Encrypt 证书是无法满足的。</p>
<h2 id="Let’s-Encrypt-通配符证书"><a href="#Let’s-Encrypt-通配符证书" class="headerlink" title="Let’s Encrypt 通配符证书"></a>Let’s Encrypt 通配符证书</h2><p>通配符证书就是证书中可以包含一个通配符，比如 .example.com、.example.cn，读者很快明白，大型企业也可以使用通配符证书了，一张证书可以防止更多的主机了。</p>
<p>这个功能可以说非常重要，从功能上看 Let’s Encrypt 和传统 CA 机构没有什么区别了，会不会触动传统 CA 机构的利益呢？</p>
<h2 id="如何申请Let’s-Encrypt通配符证书"><a href="#如何申请Let’s-Encrypt通配符证书" class="headerlink" title="如何申请Let’s Encrypt通配符证书"></a>如何申请Let’s Encrypt通配符证书</h2><p>为了实现通配符证书，Let’s Encrypt 对 ACME 协议的实现进行了升级，只有 v2 协议才能支持通配符证书。</p>
<p>也就是说任何客户端只要支持 ACME v2 版本，就可以申请通配符证书了，是不是很激动。</p>
<p>读者可以查看下自己惯用的客户端是不是支持 ACME v2 版本，官方介绍 Certbot 0.22.0 版本支持新的协议版本，我立刻进行了升级：</p>
<p>./certbot-auto -V<br>Upgrading certbot-auto 0.21.1 to 0.22.0…<br>Replacing certbot-auto…</p>
<p>./certbot-auto -V<br>certbot 0.22.0<br>在了解该协议之前有几个注意点：</p>
<p>1）客户在申请 Let’s Encrypt 证书的时候，需要校验域名的所有权，证明操作者有权利为该域名申请证书，目前支持三种验证方式：</p>
<p>dns-01：给域名添加一个 DNS TXT 记录。</p>
<p>http-01：在域名对应的 Web 服务器下放置一个 HTTP well-known URL 资源文件。</p>
<p>tls-sni-01：在域名对应的 Web 服务器下放置一个 HTTPS well-known URL 资源文件。</p>
<p>而申请通配符证书，只能使用 dns-01 的方式。</p>
<p>2）ACME v2 和 v1 协议是互相不兼容的，为了使用 v2 版本，客户端需要创建另外一个账户（代表客户端操作者），以 Certbot 客户端为例，大家可以查看：</p>
<p>$ tree /etc/letsencrypt/accounts<br>.<br>├── acme-staging.api.letsencrypt.org<br>└── acme-v01.api.letsencrypt.org<br>3）Enumerable Orders 和限制</p>
<p>为了实现通配符证书，Let’s Encrypt 在申请者身份校验上做了很大的改变。</p>
<p>有了订单 ID 的概念，主要是为了追踪通配符域名。</p>
<p>申请限制，在 V1 版本，Let’s Encrypt 为了避免滥操作，对申请证书有一些限制（很难学习，但是正常使用不会遇到该限制）。而 v2 版本，对于通配符证书，多了一个限制，New Orders per Account（每个证书订单数限制）。</p>
<p>这两个细节，后续再仔细研究。</p>
<h2 id="实践测试"><a href="#实践测试" class="headerlink" title="实践测试"></a>实践测试</h2><p>我迫不及待想使用 Certbot 申请通配符证书，升级 Certbot 版本运行下列命令：</p>
<p>$ certbot-auto certonly  -d *.newyingyong.cn –manual –preferred-challenges dns</p>
<p>Saving debug log to /var/log/letsencrypt/letsencrypt.log<br>Plugins selected: Authenticator manual, Installer None<br>Obtaining a new certificate<br>The currently selected ACME CA endpoint does not support issuing wildcard certificates.</p>
<p>参数说明：</p>
<p>certonly，插件，Certbot 有很多插件，不同的插件都可以申请证书，用户可以根据需要自行选择<br>-d 为那些主机申请证书，如果是通配符，输入 *.newyingyong.cn<br>–preferred-challenges dns，使用 DNS 方式校验域名所有权<br>接下去就是命令行的输出：</p>
<p>Saving debug log to /var/log/letsencrypt/letsencrypt.log<br>Plugins selected: Authenticator manual, Installer None<br>Enter email address (used for urgent renewal and security notices) (Enter ‘c’ to<br>cancel): <a href="mailto:ywdblog@gmail.com" target="_blank" rel="noopener">ywdblog@gmail.com</a></p>
<hr>
<p>Please read the Terms of Service at<br><a href="https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf" target="_blank" rel="noopener">https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf</a>. You must<br>agree in order to register with the ACME server at</p>
<h2 id="https-acme-v02-api-letsencrypt-org-directory"><a href="#https-acme-v02-api-letsencrypt-org-directory" class="headerlink" title="https://acme-v02.api.letsencrypt.org/directory"></a><a href="https://acme-v02.api.letsencrypt.org/directory" target="_blank" rel="noopener">https://acme-v02.api.letsencrypt.org/directory</a></h2><p>(A)gree/(C)ancel: A</p>
<p>Plugins selected: Authenticator manual, Installer None<br>Obtaining a new certificate<br>Performing the following challenges:<br>dns-01 challenge for newyingyong.cn</p>
<hr>
<p>NOTE: The IP of this machine will be publicly logged as having requested this<br>certificate. If you’re running certbot in manual mode on a machine that is not<br>your server, please ensure you’re okay with that.</p>
<h2 id="Are-you-OK-with-your-IP-being-logged"><a href="#Are-you-OK-with-your-IP-being-logged" class="headerlink" title="Are you OK with your IP being logged?"></a>Are you OK with your IP being logged?</h2><p>(Y)es/(N)o: y</p>
<p>上述有两个交互式的提示：</p>
<p>是否同意 Let’s Encrypt 协议要求</p>
<p>询问是否对域名和机器（IP）进行绑定</p>
<p>确认同意才能继续。</p>
<p>继续查看命令行的输出，非常关键：</p>
<hr>
<p>Please deploy a DNS TXT record under the name<br>_acme-challenge.newyingyong.cn with the following value:</p>
<p>2_8KBE_jXH8nYZ2unEViIbW52LhIqxkg6i9mcwsRvhQ</p>
<h2 id="Before-continuing-verify-the-record-is-deployed"><a href="#Before-continuing-verify-the-record-is-deployed" class="headerlink" title="Before continuing, verify the record is deployed."></a>Before continuing, verify the record is deployed.</h2><p>Press Enter to Continue<br>Waiting for verification…<br>Cleaning up challenges</p>
<p>要求配置 DNS TXT 记录，从而校验域名所有权，也就是判断证书申请者是否有域名的所有权。</p>
<p>上面输出要求给 _acme-challenge.newyingyong.cn 配置一条 TXT 记录，在没有确认 TXT 记录生效之前不要回车执行。</p>
<p>我使用的是阿里云的域名服务器，登录控制台操作如下图：</p>
<p>然后输入下列命令确认 TXT 记录是否生效：</p>
<p>$ dig  -t txt  _acme-challenge.newyingyong.cn @8.8.8.8    </p>
<p>;; OPT PSEUDOSECTION:<br>; EDNS: version: 0, flags:; udp: 512<br>;; QUESTION SECTION:<br>;_acme-challenge.newyingyong.cn.        IN      TXT</p>
<p>;; ANSWER SECTION:<br>_acme-challenge.newyingyong.cn. 599 IN  TXT     “2_8KBE_jXH8nYZ2unEViIbW52LhIqxkg6i9mcwsRvhQ”</p>
<p>确认生效后，回车执行，输出如下：</p>
<p>IMPORTANT NOTES:</p>
<ul>
<li>Congratulations! Your certificate and chain have been saved at:<br>/etc/letsencrypt/live/newyingyong.cn/fullchain.pem<br>Your key file has been saved at:<br>/etc/letsencrypt/live/newyingyong.cn/privkey.pem<br>Your cert will expire on 2018-06-12. To obtain a new or tweaked<br>version of this certificate in the future, simply run certbot-auto<br>again. To non-interactively renew <em>all</em> of your certificates, run<br>“certbot-auto renew”</li>
<li><p>If you like Certbot, please consider supporting our work by:</p>
<p>Donating to ISRG / Let’s Encrypt:   <a href="https://letsencrypt.org/donate" target="_blank" rel="noopener">https://letsencrypt.org/donate</a><br>Donating to EFF:                    <a href="https://eff.org/donate-le" target="_blank" rel="noopener">https://eff.org/donate-le</a></p>
</li>
</ul>
<p>恭喜您，证书申请成功，证书和密钥保存在下列目录：</p>
<p>$ tree /etc/letsencrypt/archive/newyingyong.cn<br>.<br>├── cert1.pem<br>├── chain1.pem<br>├── fullchain1.pem<br>└── privkey1.pem</p>
<p>然后校验证书信息，输入如下命令：</p>
<p>openssl x509 -in  /etc/letsencrypt/archive/newyingyong.cn/cert1.pem -noout -text</p>
<p>关键输出如下：</p>
<p>Authority Information Access:<br>        OCSP - URI:<a href="http://ocsp.int-x3.letsencrypt.org" target="_blank" rel="noopener">http://ocsp.int-x3.letsencrypt.org</a><br>        CA Issuers - URI:<a href="http://cert.int-x3.letsencrypt.org/" target="_blank" rel="noopener">http://cert.int-x3.letsencrypt.org/</a></p>
<p>X509v3 Subject Alternative Name:<br>    DNS:*.newyingyong.cn</p>
<p>完美，证书包含了 SAN 扩展，该扩展的值就是 *.newyingyong.cn。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Let-s-Encrypt/">Let's Encrypt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/https/">https</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-获取Let&#39;sEncrypt免费证书" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/12/获取Let'sEncrypt免费证书/" class="article-date">
      <time datetime="2018-06-12T07:19:50.000Z" itemprop="datePublished">2018-06-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/12/获取Let'sEncrypt免费证书/">获取Let‘sEncrypt免费证书.md</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="获取Let’s-Encrypt免费通配符证书实现Https"><a href="#获取Let’s-Encrypt免费通配符证书实现Https" class="headerlink" title="获取Let’s Encrypt免费通配符证书实现Https"></a>获取Let’s Encrypt免费通配符证书实现Https</h1><p>3月14日，Let’s Encrypt的执行董事Josh Aas对外宣布，他们的通配符证书正式上线，用户可以基于此特性轻松部署/开启所有子域名的HTTPS功能。</p>
<p>Let’s Encrypt 是国外一个公共的免费SSL项目，由 Linux 基金会托管，它的来头不小，由 Mozilla、思科、Akamai、IdenTrust 和 EFF 等组织发起，目的就是向网站自动签发和管理免费证书，以便加速互联网由 HTTP 过渡到 HTTPS，目前 Facebook 等大公司开始加入赞助行列。</p>
<p>Let’s Encrypt 已经得了 IdenTrust 的交叉签名，这意味着其证书现在已经可以被 Mozilla、Google、Microsoft 和 Apple 等主流的浏览器所信任，用户只需要在 Web 服务器证书链中配置交叉签名，浏览器客户端会自动处理好其它的一切，Let’s Encrypt 安装简单，使用非常方便。</p>
<h2 id="Linux下获取证书生成工具certbot"><a href="#Linux下获取证书生成工具certbot" class="headerlink" title="Linux下获取证书生成工具certbot"></a>Linux下获取证书生成工具certbot</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//dl.eff.org/certbot-auto</span></span><br><span class="line">chmod a+x certbot-<span class="keyword">auto</span></span><br></pre></td></tr></table></figure>
<h2 id="获取证书"><a href="#获取证书" class="headerlink" title="获取证书"></a>获取证书</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell <span class="string">./certbot-auto</span> certonly -d *.你的域名 <span class="params">--manual</span> <span class="params">--preferred-challenges</span> dns <span class="params">--server</span> https:<span class="string">//acme-v02.api.letsencrypt.org/directory</span></span><br></pre></td></tr></table></figure>
<p>上述有三个交互式的提示：</p>
<p>是否同意 Let’s Encrypt 协议要求<br>询问是否对域名和机器（IP）进行绑定<br>输入邮箱，给你发送一封验证邮件<br>确认同意才能继续。</p>
<p>继续查看命令行的输出，非常关键：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Please deploy a<span class="built_in"> DNS </span>TXT record under the name</span><br><span class="line">_acme-challenge.xxx.cn with the following value:</span><br><span class="line"></span><br><span class="line">2_8KBE_jXH8nYZ2unEViIbW52LhIqxkg6i9mcwsRvhQ</span><br><span class="line"></span><br><span class="line">Before continuing, verify the record is deployed.</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Press Enter <span class="keyword">to</span> Continue</span><br><span class="line">Waiting <span class="keyword">for</span> verification<span class="built_in">..</span>.</span><br><span class="line">Cleaning up challenges</span><br></pre></td></tr></table></figure>
<p>要求给 _acme-challenge.xxx.cn 配置一条 TXT 记录，在没有确认 TXT 记录生效之前不要回车执行。</p>
<p>然后输入下列命令确认 TXT 记录是否生效：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ dig  -t txt  _acme-challenge.xxx.cn @<span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>    </span><br><span class="line"></span><br><span class="line">;; OPT <span class="string">PSEUDOSECTION:</span></span><br><span class="line">; <span class="string">EDNS:</span> <span class="string">version:</span> <span class="number">0</span>, <span class="string">flags:</span>; <span class="string">udp:</span> <span class="number">512</span></span><br><span class="line">;; QUESTION <span class="string">SECTION:</span></span><br><span class="line">;_acme-challenge.xxx.cn.        IN      TXT</span><br><span class="line"></span><br><span class="line">;; ANSWER <span class="string">SECTION:</span></span><br><span class="line">_acme-challenge.xxx.cn. <span class="number">599</span> IN  TXT     <span class="string">"2_8KBE_jXH8nYZ2unEViIbW52LhIqxkg6i9mcwsRvhQ"</span></span><br></pre></td></tr></table></figure>
<p>确认生效后，回车执行</p>
<p>恭喜您，证书申请成功，证书和密钥保存在下列目录：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tree /etc/letsencrypt/archive/xxx.cn</span><br><span class="line">.</span><br><span class="line">├── cert1.pem</span><br><span class="line">├── chain1.pem</span><br><span class="line">├── fullchain1.pem</span><br><span class="line">└── privkey1.pem</span><br></pre></td></tr></table></figure>
<h2 id="证书更新"><a href="#证书更新" class="headerlink" title="证书更新"></a>证书更新</h2><p>证书有效期为三个月，到期之前需要更新证书，更新流程就是重新执行一遍上面的操作，新证书会在你申请证书的日期上加三个月。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/https/">https</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Redis数据介绍与指令大全" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/24/Redis数据介绍与指令大全/" class="article-date">
      <time datetime="2018-05-24T07:41:56.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/Redis数据介绍与指令大全/">Redis数据介绍与指令大全</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Redis数据介绍与指令大全"><a href="#Redis数据介绍与指令大全" class="headerlink" title="Redis数据介绍与指令大全"></a>Redis数据介绍与指令大全</h1><p>作为 Key-value 型数据库,Redis 也提供了键(Key)和键值(Value)的映射关系。但是,除了常规的数值或字符串,Redis 的键值还可以是以下形式之一:</p>
<ul>
<li>Lists (列表)</li>
<li>Sets (集合)</li>
<li>Sorted sets (有序集合)</li>
<li>Hashes (哈希表)</li>
</ul>
<h2 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h2><ol>
<li>取最新的n个数据，如读取作家博客最新的50篇文章，通过List实现按时间排序的数据的高效获取</li>
<li>排行榜应用，以特定条件为排序标准，将其设成sorted set 的score，进而实现高效获取</li>
<li>需要精准设定过期时间的应用，把sorted set 的 score 值设置成过期时间的时间戳,那么就可以简单地通过过期时间排序,定时清除过期数据了</li>
<li>计数器应用，Redis 的命令都是原子性的,可以轻松地利用 INCR,DECR 命令来构建计数器系统。</li>
<li>去除大量数据中的重复数据，将数据放入set中，就能实现对重复数据的排除</li>
<li>构建队列系统使用 list 可以构建队列系统,使用 sorted set 甚至可以构建有优先级的队列系统。</li>
<li>实时系统,反垃圾系统通过上面说到的 set 功能,你可以知道一个终端用户是否进行了某个操作,可以找到其操作的集合并进行分析统计对比等。</li>
<li>Pub/Sub构建实时消息系统</li>
<li>缓存</li>
</ol>
<h2 id="redis数据类型及操作详解"><a href="#redis数据类型及操作详解" class="headerlink" title="redis数据类型及操作详解"></a>redis数据类型及操作详解</h2><h3 id="1-strings类型及操作"><a href="#1-strings类型及操作" class="headerlink" title="1. strings类型及操作"></a>1. strings类型及操作</h3><p><img src="/images/string.png" alt=""></p>
<h3 id="2-hashes类型及操作"><a href="#2-hashes类型及操作" class="headerlink" title="2. hashes类型及操作"></a>2. hashes类型及操作</h3><p>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象,相较string,由于使用了zipmap而占用更少的内存</p>
<p>操作方法：</p>
<p><img src="/images/hash.png" alt=""></p>
<h3 id="3-list类型及操作"><a href="#3-list类型及操作" class="headerlink" title="3. list类型及操作"></a>3. list类型及操作</h3><p>list 底层实现是一个双向链表，最大长度为2^32,也可用作栈</p>
<p>操作方法：</p>
<p><img src="/images/list.png" alt=""></p>
<h3 id="4-set类型及操作"><a href="#4-set类型及操作" class="headerlink" title="4. set类型及操作"></a>4. set类型及操作</h3><p>set 是 string 类型的无序集合。set 元素最大可以包含(2 的 32 次方)个元素。set 的是通过 hash table 实现的，hash table 会随着添加或者删除自动的调整大小。调整 hash table 大小时候需要同步(获取写锁)会阻塞其他读写操作。</p>
<p>操作方法：</p>
<p><img src="/images/set.png" alt=""></p>
<h3 id="5-sorted-sets-类型及操作"><a href="#5-sorted-sets-类型及操作" class="headerlink" title="5. sorted sets 类型及操作"></a>5. sorted sets 类型及操作</h3><p>sorted set 在set的基础上增加了一个标识属性，它可以在set添加或修改元素时指定，每次指定，set会自动按标识调整顺序，set的每一个元素都会关联一个double类型的score。使用时往往我们把要排序的字段作为score存储，对象id则作为元素存储。</p>
<p>操作方法：</p>
<p><img src="/images/sortedset.png" alt=""></p>
<h2 id="redis-常用命令"><a href="#redis-常用命令" class="headerlink" title="redis 常用命令"></a>redis 常用命令</h2><h3 id="1-键值相关命令"><a href="#1-键值相关命令" class="headerlink" title="1. 键值相关命令"></a>1. 键值相关命令</h3><p><img src="/images/clientcmd.png" alt=""></p>
<h3 id="2-服务器相关命令"><a href="#2-服务器相关命令" class="headerlink" title="2. 服务器相关命令"></a>2. 服务器相关命令</h3><p><img src="/images/servercmd.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/缓存/">缓存</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-redis常用命令总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/24/redis常用命令总结/" class="article-date">
      <time datetime="2018-05-24T07:26:22.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/redis常用命令总结/">redis常用命令总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="redis常用命令总结"><a href="#redis常用命令总结" class="headerlink" title="redis常用命令总结"></a>redis常用命令总结</h1><h2 id="一、key-pattern-查询相应的key"><a href="#一、key-pattern-查询相应的key" class="headerlink" title="一、key pattern 查询相应的key"></a>一、key pattern 查询相应的key</h2><p>　　（1）redis允许模糊查询key　　有3个通配符  <code>*、?、[]`</code></p>
<p>　　（2）randomkey：返回随机key　　</p>
<p>　　（3）type key：返回key存储的类型</p>
<p>　　（4）exists key：判断某个key是否存在</p>
<p>　　（5）del key：删除key</p>
<p>　　（6）rename key newkey：改名</p>
<p>　　（7）renamenx key newkey：如果newkey不存在则修改成功</p>
<p>　　（8）move key 1：将key移动到1数据库</p>
<p>　　（9）ttl key：查询key的生命周期（秒）</p>
<p>　　（10）expire key 整数值：设置key的生命周期以秒为单位</p>
<p>　　（11）pexpire key 整数值：设置key的生命周期以毫秒为单位</p>
<p>　　（12）pttl key：查询key 的生命周期（毫秒）</p>
<p>　　（13）perisist key：把指定key设置为永久有效</p>
<h2 id="二、字符串类型的操作"><a href="#二、字符串类型的操作" class="headerlink" title="二、字符串类型的操作"></a>二、字符串类型的操作</h2><p>　　（1）set key value [ex 秒数] [px 毫秒数] [nx/xx]　　</p>
<p>　　　　　　如果ex和px同时写，则以后面的有效期为准</p>
<p>　　　　　　nx：如果key不存在则建立</p>
<p>　　　　　　xx：如果key存在则修改其值</p>
<p>　　（2）get key：取值</p>
<p>　　（3）mset key1 value1 key2 value2 一次设置多个值</p>
<p>　　（4）mget key1 key2 ：一次获取多个值</p>
<p>　　（5）setrange key offset value：把字符串的offset偏移字节改成value</p>
<p>　　　　　　　　　　　　　　　　　　如果偏移量 &gt; 字符串长度，该字符自动补0x00</p>
<p>　　（6）append key value ：把value追加到key 的原值上</p>
<p>　　（7）getrange key start stop：获取字符串中[start, stop]范围的值</p>
<p>　　　　　　　　　　　　　　　　　　对于字符串的下标，左数从0开始，右数从-1开始</p>
<p>　　　　　　　　　　　　　　　　　　注意：当start&gt;length，则返回空字符串</p>
<p>　　　　　　　　　　　　　　　　　　　　　当stop&gt;=length，则截取至字符串尾</p>
<p>　　　　　　　　　　　　　　　　　　　　　如果start所处位置在stop右边，则返回空字符串</p>
<p>　　（8）getset key nrevalue：获取并返回旧值，在设置新值</p>
<p>　　（9）incr key：自增，返回新值，如果incr一个不是int的value则返回错误，incr一个不存在的key，则设置key为1</p>
<p>　　（10）incrby key 2：跳2自增</p>
<p>　　（11）incrbyfloat by 0.7： 自增浮点数　</p>
<p>　　（12）setbit key offset value：设置offset对应二进制上的值，返回该位上的旧值</p>
<p>注意：如果offset过大，则会在中间填充0</p>
<p>　　　offset最大到多少</p>
<p>　　　2^32-1，即可推出最大的字符串为512M</p>
<p>　　（13）bitop operation destkey key1 [key2..]    对key1 key2做opecation并将结果保存在destkey上</p>
<p>　　　　　　　　　　　　　　　　　　　　　　　　　　opecation可以是AND OR NOT XOR</p>
<p>　　（14）strlen key：取指定key的value值的长度</p>
<p>　  （15）setex key time value：设置key对应的值value，并设置有效期为time秒</p>
<h2 id="三、链表操作"><a href="#三、链表操作" class="headerlink" title="三、链表操作"></a>三、链表操作</h2><p>　　Redis的list类型其实就是一个每个子元素都是string类型的双向链表，链表的最大长度是2^32。list既可以用做栈，也可以用做队列。</p>
<p>　　list的pop操作还有阻塞版本，主要是为了避免轮询</p>
<p>　　（1）lpush key value：把值插入到链表头部</p>
<p>　　（2）rpush key value：把值插入到链表尾部</p>
<p>　　（3）lpop key ：返回并删除链表头部元素</p>
<p>　　（4）rpop key： 返回并删除链表尾部元素</p>
<p>　　（5）lrange key start stop：返回链表中[start, stop]中的元素</p>
<p>　　（6）lrem key count value：从链表中删除value值，删除count的绝对值个value后结束</p>
<p>　　　　　　　　　　　　　　　　count &gt; 0 从表头删除　　count &lt; 0 从表尾删除　　count=0 全部删除</p>
<p>　　（7）ltrim key start stop：剪切key对应的链接，切[start, stop]一段并把改制重新赋给key</p>
<p>　　（8）lindex key index：返回index索引上的值</p>
<p>　　（9）llen key：计算链表的元素个数</p>
<p>　　（10）linsert key after|before search value：在key 链表中寻找search，并在search值之前|之后插入value</p>
<p>　　（11）rpoplpush source dest：把source 的末尾拿出，放到dest头部，并返回单元值</p>
<p>　　　　应用场景： task + bak 双链表完成安全队列</p>
<p>　业务逻辑： rpoplpush task bak</p>
<p>　　　　　　　　　接收返回值并做业务处理</p>
<p>　　　　　　　　　如果成功则rpop bak清除任务，如果不成功，下次从bak表取任务</p>
<p>　　（12）brpop，blpop key timeout：等待弹出key的尾/头元素</p>
<p>　　　　　　　　　　　　　　　　timeout为等待超时时间，如果timeout为0则一直等待下去</p>
<p>　　　　　　应用场景：长轮询ajax，在线聊天时能用到</p>
<h2 id="四、hashes类型及操作"><a href="#四、hashes类型及操作" class="headerlink" title="四、hashes类型及操作"></a>四、hashes类型及操作</h2><p>　　Redis hash 是一个string类型的field和value的映射表，它的添加、删除操作都是O(1)（平均）。hash特别适用于存储对象，将一个对象存储在hash类型中会占用更少的内存，并且可以方便的存取整个对象。</p>
<p>　　配置： hash_max_zipmap_entries 64 #配置字段最多64个</p>
<p>　　　　　 hash_max_zipmap_value 512 #配置value最大为512字节</p>
<p>　　（1）hset myhash field value：设置myhash的field为value</p>
<p>　　（2）hsetnx myhash field value：不存在的情况下设置myhash的field为value</p>
<p>　　（3）hmset myhash field1 value1 field2 value2：同时设置多个field</p>
<p>　　（4）hget myhash field：获取指定的hash field</p>
<p>　　（5）hmget myhash field1 field2：一次获取多个field</p>
<p>　　（6）hincrby myhash field 5：指定的hash field加上给定的值</p>
<p>　　（7）hexists myhash field：测试指定的field是否存在</p>
<p>　　（8）hlen myhash：返回hash的field数量</p>
<p>　　（9）hdel myhash field：删除指定的field</p>
<p>　　（10）hkeys myhash：返回hash所有的field</p>
<p>　　（11）hvals myhash：返回hash所有的value</p>
<p>　　（12）hgetall myhash：获取某个hash中全部的field及value　</p>
<p>##　五、集合结构操作</p>
<p>　　特点：无序性、确定性、唯一性</p>
<p>　　（1）sadd key value1 value2：往集合里面添加元素</p>
<p>　　（2）smembers key：获取集合所有的元素</p>
<p>　　（3）srem key value：删除集合某个元素</p>
<p>　　（4）spop key：返回并删除集合中1个随机元素（可以坐抽奖，不会重复抽到某人）　　　</p>
<p>　　（5）srandmember key：随机取一个元素</p>
<p>　　（6）sismember key value：判断集合是否有某个值</p>
<p>　　（7）scard key：返回集合元素的个数</p>
<p>　　（8）smove source dest value：把source的value移动到dest集合中</p>
<p>　　（9）sinter key1 key2 key3：求key1 key2 key3的交集</p>
<p>　　（10）sunion key1 key2：求key1 key2 的并集</p>
<p>　　（11）sdiff key1 key2：求key1 key2的差集</p>
<p>　　（12）sinterstore res key1 key2：求key1 key2的交集并存在res里　</p>
<h2 id="六、有序集合"><a href="#六、有序集合" class="headerlink" title="六、有序集合"></a>六、有序集合</h2><p>　　概念：它是在set的基础上增加了一个顺序属性，这一属性在添加修改元素的时候可以指定，每次指定后，zset会自动按新的值调整顺序。可以理解为有两列的mysql表，一列存储value，一列存储顺序，操作中key理解为zset的名字。</p>
<p>　　和set一样sorted，sets也是string类型元素的集合，不同的是每个元素都会关联一个double型的score。sorted set的实现是skip list和hash table的混合体。</p>
<p>　　当元素被添加到集合中时，一个元素到score的映射被添加到hash table中，所以给定一个元素获取score的开销是O(1)。另一个score到元素的映射被添加的skip list，并按照score排序，所以就可以有序地获取集合中的元素。添加、删除操作开销都是O(logN)和skip list的开销一致，redis的skip list 实现是双向链表，这样就可以逆序从尾部去元素。sorted set最经常使用方式应该就是作为索引来使用，我们可以把要排序的字段作为score存储，对象的ID当元素存储。</p>
<p>　　（1）zadd key score1 value1：添加元素</p>
<p>　　（2）zrange key start stop [withscore]：把集合排序后,返回名次[start,stop]的元素  默认是升续排列  withscores 是把score也打印出来</p>
<p>　　（3）zrank key member：查询member的排名（升序0名开始）</p>
<p>　　（4）zrangebyscore key min max [withscores] limit offset N：集合（升序）排序后取score在[min, max]内的元素，并跳过offset个，取出N个</p>
<p>　　（5）zrevrank key member：查询member排名（降序 0名开始）</p>
<p>　　（6）zremrangebyscore key min max：按照score来删除元素，删除score在[min, max]之间</p>
<p>　　（7）zrem key value1 value2：删除集合中的元素</p>
<p>　　（8）zremrangebyrank key start end：按排名删除元素，删除名次在[start, end]之间的</p>
<p>　　（9）zcard key：返回集合元素的个数</p>
<p>　　（10）zcount key min max：返回[min, max]区间内元素数量</p>
<p>　　（11）zinterstore dest numkeys key1[key2..] [WEIGHTS weight1 [weight2…]] [AGGREGATE SUM|MIN|MAX]</p>
<p>　　　　　　求key1，key2的交集，key1，key2的权值分别是weight1，weight2</p>
<p>　　　　　　聚合方法用 sum|min|max</p>
<p>　　　　　　聚合结果 保存子dest集合内</p>
<p>　　　　　　注意：weights,aggregate如何理解？</p>
<p>答：如果有交集，交集元素又有score，score怎么处理？aggregate num-&gt;score相加，min最小score，max最大score，另外可以通过weights设置不同的key的权重，交集时  score*weight</p>
<h2 id="七、服务器相关命令"><a href="#七、服务器相关命令" class="headerlink" title="七、服务器相关命令"></a>七、服务器相关命令</h2><p>　　（1）ping：测定连接是否存活</p>
<p>　　（2）echo：在命令行打印一些内容</p>
<p>　　（3）select：选择数据库</p>
<p>　　（4）quit：退出连接</p>
<p>　　（5）dbsize：返回当前数据库中key的数目</p>
<p>　　（6）info：获取服务器的信息和统计</p>
<p>　　（7）monitor：实时转储收到的请求</p>
<p>　　（8）config get 配置项：获取服务器配置的信息</p>
<p>　　　　 config set 配置项  值：设置配置项信息</p>
<p>　　（9）flushdb：删除当前选择数据库中所有的key</p>
<p>　　（10）flushall：删除所有数据库中的所有的key</p>
<p>　　（11）time：显示服务器时间，时间戳（秒），微秒数</p>
<p>　　（12）bgrewriteaof：后台保存rdb快照</p>
<p>　　（13）bgsave：后台保存rdb快照</p>
<p>　　（14）save：保存rdb快照</p>
<p>　　（15）lastsave：上次保存时间</p>
<p>　　（16）shutdown [save/nosave]</p>
<p>　　注意：如果不小心运行了flushall，立即shutdown nosave，关闭服务器，然后手工编辑aof文件，去掉文件中的flushall相关行，然后开启服务器，就可以倒回原来是数据。如果flushall之后，系统恰好bgwriteaof了，那么aof就清空了，数据丢失。</p>
<p>　　（17）showlog：显示慢查询</p>
<p>　　　　　　问：多慢才叫慢？</p>
<p>　　　　　　答：由slowlog-log-slower-than 10000，来指定（单位为微秒）</p>
<p>　　　　　　问：服务器存储多少条慢查询记录</p>
<p>　　　　　　答：由slowlog-max-len 128，来做限制　　　　　　　</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/缓存/">缓存</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-redis通配符删除" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/24/redis通配符删除/" class="article-date">
      <time datetime="2018-05-24T07:14:45.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/redis通配符删除/">redis通配符删除</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="redis通配符删除"><a href="#redis通配符删除" class="headerlink" title="redis通配符删除"></a>redis通配符删除</h1><h2 id="批量删除Key"><a href="#批量删除Key" class="headerlink" title="批量删除Key"></a>批量删除Key</h2><p>Redis 中有删除单个 Key 的指令 DEL，但好像没有批量删除 Key 的指令，不过我们可以借助 Linux 的 xargs 指令来完成这个动作</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-<span class="keyword">cli</span> keys <span class="string">"*"</span> | xargs redis-<span class="keyword">cli</span> del</span><br></pre></td></tr></table></figure>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果要指定 Redis 数据库访问密码，使用下面的命令</span></span><br><span class="line">redis-<span class="keyword">cli</span> -a password keys <span class="string">"*"</span> | xargs redis-<span class="keyword">cli</span> -a password del  </span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的命令指定数据序号为0，即默认数据库  </span></span><br><span class="line">redis-<span class="keyword">cli</span> -<span class="keyword">n</span> 0 keys <span class="string">"*"</span> | xargs redis-<span class="keyword">cli</span> -<span class="keyword">n</span> 0 del</span><br></pre></td></tr></table></figure>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//批量删除redis 数据库中redis key的方法如下：</span></span><br><span class="line">bin/redis-cli  –h <span class="params">&lt;your_redis_server_IP&gt;</span></span><br><span class="line">                -p  <span class="number">6379</span>  -n  <span class="params">&lt;your database ID&gt;</span></span><br><span class="line">                -a  <span class="params">&lt;your_auth_keys&gt;</span>  keys  <span class="string">"mykeys*"</span>  |  xargs bin/redis-cli -n <span class="params">&lt;your database ID&gt;</span> del</span><br></pre></td></tr></table></figure>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除所有Key，可以使用Redis的flushdb和flushall命令</span></span><br><span class="line"><span class="comment">//删除当前数据库中的所有Key  </span></span><br><span class="line">flushdb  </span><br><span class="line"><span class="comment">//删除所有数据库中的key  </span></span><br><span class="line">flushall</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/缓存/">缓存</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-程序猿灯谜" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/04/程序猿灯谜/" class="article-date">
      <time datetime="2018-05-04T08:24:04.000Z" itemprop="datePublished">2018-05-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/04/程序猿灯谜/">程序猿灯谜</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="灯谜"><a href="#灯谜" class="headerlink" title="灯谜"></a>灯谜</h1><ol>
<li><p>老会计喝二锅（打一热门技术）</p>
</li>
<li><p>梦中交谈（打一热门技术）</p>
</li>
<li><p>连胜六场又赢了（打一知名操作系统）</p>
</li>
<li><p>小米大合唱（打一著名互联网厂商）</p>
</li>
<li><p>男女生都一样（打一技术术语）</p>
</li>
<li><p>不达目的誓不罢休（打一著名网络解决方案提供商）</p>
</li>
<li><p>席卷天下，包举宇内，囊括四海，并吞八荒（打一互联网技术）</p>
</li>
<li><p>话又说回来了（打一网络安全术语）</p>
</li>
<li><p>禽流感（打一常见的PC/服务器故障）</p>
</li>
<li><p>深夜造访（打一网络安全术语）</p>
</li>
<li><p>屡屡破记录（打一技术术语）</p>
</li>
<li><p>单个花生超产（打一芯片技术）</p>
</li>
<li><p>驴友上路多郁闷（打一网络设备）</p>
</li>
<li><p>月老难扯二人姻缘（打一网络技术）</p>
</li>
<li><p>光芒照四方（打一安全厂商）</p>
</li>
<li><p>网管抓狂（打一网络设备）</p>
</li>
<li><p>悟空出了五指山（打一技术术语）</p>
</li>
<li><p>不听话就得打（打一网络安全术语）</p>
</li>
<li><p>整个界面都是阿凡达（打一PC/服务器故障现象）</p>
</li>
<li><p>E（打一开发语言）</p>
</li>
<li><p>拳王的金腰带（打一网络技术）</p>
</li>
<li><p>方便月老配对象（打一网络设备）</p>
</li>
<li><p>走麦城（打一网络安全设备）</p>
</li>
<li><p>皇帝绷着脸（打一设备）</p>
</li>
<li><p>太上老君的金丹（打一网络安全术语）</p>
</li>
<li><p>王老吉面壁（打一网络安全设备）</p>
</li>
</ol>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生活乐趣/">生活乐趣</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2018/05/04/程序猿灯谜/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-高性能web平台OpenResty" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/04/高性能web平台OpenResty/" class="article-date">
      <time datetime="2018-05-04T06:38:17.000Z" itemprop="datePublished">2018-05-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/04/高性能web平台OpenResty/">高性能web平台OpenResty</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="高性能web平台OpenResty"><a href="#高性能web平台OpenResty" class="headerlink" title="高性能web平台OpenResty"></a>高性能web平台OpenResty</h1><h2 id="OpenResty®"><a href="#OpenResty®" class="headerlink" title="OpenResty®"></a>OpenResty®</h2><p>OpenResty® 是一个基于 Nginx 与 Lua 的高性能 Web 平台，其内部集成了大量精良的 Lua 库、第三方模块以及大多数的依赖项。用于方便地搭建能够处理超高并发、扩展性极高的动态 Web 应用、Web 服务和动态网关。</p>
<p>OpenResty® 通过汇聚各种设计精良的 Nginx 模块（主要由 OpenResty 团队自主开发），从而将 Nginx 有效地变成一个强大的通用 Web 应用平台。这样，Web 开发人员和系统工程师可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及 Lua 模块，快速构造出足以胜任 10K 乃至 1000K 以上单机并发连接的高性能 Web 应用系统。</p>
<p>OpenResty® 的目标是让你的Web服务直接跑在 Nginx 服务内部，充分利用 Nginx 的非阻塞 I/O 模型，不仅仅对 HTTP 客户端请求,甚至于对远程后端诸如 MySQL、PostgreSQL、Memcached 以及 Redis 等都进行一致的高性能响应。</p>
<p>OpenResty(又称：ngx_openresty) 是一个基于 NGINX 的可伸缩的 Web 平台，由中国人章亦春发起，提供了很多高质量的第三方模块。<br>OpenResty 是一个强大的 Web 应用服务器，Web 开发人员可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及 Lua 模块,更主要的是在性能方面，OpenResty可以 快速构造出足以胜任 10K 以上并发连接响应的超高性能 Web 应用系统。</p>
<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><h3 id="macOS-Mac-OS-X"><a href="#macOS-Mac-OS-X" class="headerlink" title="macOS/Mac OS X"></a>macOS/Mac OS X</h3><p>强烈建议 Mac OS X 或者 macOS 系统用户通过 homebrew 包管理器安装 OpenResty，像下面这样：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>tap openresty/<span class="keyword">brew</span></span><br><span class="line"><span class="keyword">brew </span>install openresty</span><br></pre></td></tr></table></figure>
<p>如果你之前是从 homebrew/nginx 安装的 OpenResty，请先执行：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>untap homebrew/nginx</span><br></pre></td></tr></table></figure>
<h1 id="Hello-World实例"><a href="#Hello-World实例" class="headerlink" title="Hello World实例"></a>Hello World实例</h1><p>安装成功后，可以使用openresty直接输出html页面。<br>首先可以创建一个工作目录<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /<span class="built_in">home</span>/www</span><br><span class="line">cd /<span class="built_in">home</span>/www/</span><br><span class="line"><span class="built_in">mkdir</span> logs/ conf/</span><br></pre></td></tr></table></figure></p>
<p>其中，logs目录用于存放日志，conf用于存放配置文件。</p>
<p>在conf目录下创建一个nginx.conf文件 代码如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"><span class="attribute">error_log</span> logs/error.log;</span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">9000</span>;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">default_type</span> text/html;</span><br><span class="line">            <span class="attribute">content_by_lua</span> <span class="string">'</span></span><br><span class="line"><span class="string">                ngx.say("&lt;p&gt;Hello, World!&lt;/p&gt;")</span></span><br><span class="line"><span class="string">            '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="启动openresty"><a href="#启动openresty" class="headerlink" title="启动openresty"></a>启动openresty</h2><p>默认情况下 openresty 安装在 /usr/local/openresty 目录中，启动命令为:<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/home/</span>www</span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/openresty/</span>nginx<span class="regexp">/sbin/</span>nginx -p `pwd`<span class="regexp">/ -c conf/</span>nginx.conf</span><br></pre></td></tr></table></figure></p>
<p>如果没有任何输出，说明启动成功，-p 指定我们的项目目录，-c 指定配置文件。</p>
<p>接下来我们可以使用 curl 来测试是否能够正常范围：</p>
<p><code>curl http://localhost:9000/</code></p>
<p>输出结果为：</p>
<p><code>&lt;p&gt;Hello, World!&lt;/p&gt;</code></p>
<p>OpenResty 的目标是让你的 Web 服务直接跑在 Nginx 服务内部,充分利用 Nginx 的非阻塞 I/O 模型,不仅仅对 HTTP 客户端请求,甚至于对远程后端诸如 MySQL,PostgreSQL,~Memcaches 以及 ~Redis 等都进行一致的高性能响应。<br>所以对于一些高性能的服务来说，可以直接使用 OpenResty 访问 Mysql或Redis等，而不需要通过第三方语言（PHP、Python、Ruby）等来访问数据库再返回，这大大提高了应用的性能。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-对称加密&amp;非对称加密" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/03/对称加密&非对称加密/" class="article-date">
      <time datetime="2018-05-03T01:27:09.000Z" itemprop="datePublished">2018-05-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/03/对称加密&非对称加密/">对称加密&amp;非对称加密</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="对称加密-DES"><a href="#对称加密-DES" class="headerlink" title="对称加密 - DES"></a>对称加密 - DES</h1><ol>
<li>真正的加密算法，带密钥，加密和解密使用相同的密钥</li>
<li>对称加密优点是算法公开、计算量小、加密速度快、加密效率高</li>
<li>双方都保存秘钥，其次如果一方的秘钥被泄露，那么加密信息也就不安全了。另外，每对用户每次使用对称加密算法时，都需要使用其他人不知道的唯一秘钥，这会使得收、发双方所拥有的钥匙数量巨大，密钥管理成为双方的负担</li>
<li>DES使用56位密钥，以现代计算能力，24小时内即可被破解。虽然如此，在某些简单应用中，我们还是可以使用DES加密算法</li>
</ol>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DES</span> </span>&#123;  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datasource byte[]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password   String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> byte[]</span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encrypt(<span class="keyword">byte</span>[] datasource, String password) &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">              SecureRandom random = <span class="keyword">new</span> SecureRandom();  </span><br><span class="line">              DESKeySpec desKey = <span class="keyword">new</span> DESKeySpec(password.getBytes());  </span><br><span class="line">              <span class="comment">//创建一个密匙工厂，然后用它把DESKeySpec转换成  </span></span><br><span class="line">              SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(<span class="string">"DES"</span>);  </span><br><span class="line">              SecretKey securekey = keyFactory.generateSecret(desKey);  </span><br><span class="line">              <span class="comment">//Cipher对象实际完成加密操作  </span></span><br><span class="line">              Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);  </span><br><span class="line">              <span class="comment">//用密匙初始化Cipher对象,Cipher.ENCRYPT_MODE代表编码模式  </span></span><br><span class="line">              cipher.init(Cipher.ENCRYPT_MODE, securekey, random);  </span><br><span class="line">              <span class="comment">//现在，获取数据并加密  </span></span><br><span class="line">              <span class="comment">//正式执行加密操作  </span></span><br><span class="line">              <span class="function"><span class="keyword">return</span> cipher.<span class="title">doFinal</span><span class="params">(datasource)</span></span>;  </span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable e) &#123;  </span><br><span class="line">              e.printStackTrace();  </span><br><span class="line">          &#125;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> src      byte[]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> byte[]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decrypt(<span class="keyword">byte</span>[] src, String password) <span class="keyword">throws</span> Exception &#123;  </span><br><span class="line">      <span class="comment">// DES算法要求有一个可信任的随机数源  </span></span><br><span class="line">      SecureRandom random = <span class="keyword">new</span> SecureRandom();  </span><br><span class="line">      <span class="comment">// 创建一个DESKeySpec对象  </span></span><br><span class="line">      DESKeySpec desKey = <span class="keyword">new</span> DESKeySpec(password.getBytes());  </span><br><span class="line">      <span class="comment">// 创建一个密匙工厂  </span></span><br><span class="line">      SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(<span class="string">"DES"</span>);  </span><br><span class="line">      <span class="comment">// 将DESKeySpec对象转换成SecretKey对象  </span></span><br><span class="line">      SecretKey securekey = keyFactory.generateSecret(desKey);  </span><br><span class="line">      <span class="comment">// Cipher对象实际完成解密操作  </span></span><br><span class="line">      Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);  </span><br><span class="line">      <span class="comment">// 用密匙初始化Cipher对象  </span></span><br><span class="line">      cipher.init(Cipher.DECRYPT_MODE, securekey, random);  </span><br><span class="line">      <span class="comment">// 真正开始解密操作  </span></span><br><span class="line">      <span class="function"><span class="keyword">return</span> cipher.<span class="title">doFinal</span><span class="params">(src)</span></span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="非对称加密-RSA"><a href="#非对称加密-RSA" class="headerlink" title="非对称加密 - RSA"></a>非对称加密 - RSA</h1><p>1、用RSA算法生成一对密钥，公钥发放给外部客户，私钥自己保管；有以下应用场景：<br>     【公钥加密、私钥解密】或者【私钥签名、公钥验证】<br>2、非对称加解密的理解：</p>
<ul>
<li>小明想秘密给小英发送消息</li>
<li>小英手里有一个盒子（public key），这个盒子只有小英手里的钥匙（private key）才打得开</li>
<li>小英把盒子送给小明（分发公钥）</li>
<li>小明写好消息放进盒子里，锁上盒子（公钥加密）</li>
<li>小明把盒子寄给小英（密文传输）</li>
<li>小英用手里的钥匙打开盒子，得到小明的消息（私钥解密）</li>
<li>假设小刚劫持了盒子，因为没有小英的钥匙，他也打不开</li>
</ul>
<p>与DES不同，RSA算法中，每个通信主体都有两个钥匙，一个公钥一个私钥。<br>就是有2把钥匙</p>
<ol>
<li>使用publicKey可以对数据进行加密</li>
<li>使用Key才能对数据进行解密</li>
</ol>
<p>单方向传输<br>用公钥加密的数据，只有私钥能解开（可用于加密）；<br>同时，使用私钥加密的数据，只有公钥能解开（签名）。但是速度很慢（比私钥加密慢100到1000倍），<br>公钥的主要算法有RSA，还包括Blowfish,Diffie-Helman等。</p>
<p>公钥与私钥</p>
<ol>
<li>权威数字认证机构（CA）给所有通信主体（个人或组织）颁发公钥和私钥，彼此配对，分别唯一。</li>
<li>私钥好比数字指纹，同时具有解密和加密功能。个人保管，不公开。</li>
<li>公钥好比安全性极高的挂号信箱地址，公开。</li>
</ol>
<p><em>公私钥加解密举例</em></p>
<p><img src="/images/20160122203001725.jpeg" alt=""></p>
<p>设若甲有一份需保密的数字商业合同发给乙签署。经过如下步骤：</p>
<ol>
<li>甲用乙的公钥对合同加密。</li>
<li>密文从甲发送到乙。</li>
<li>乙收到密文，并用自己的私钥对其解密。</li>
<li>解密正确，经阅读，乙用自己的私钥对合同进行签署。</li>
<li>乙用甲的公钥对已经签署的合同进行加密。</li>
<li>乙将密文发给甲。</li>
<li>甲用自己的私钥将已签署合同解密。</li>
<li>解密正确，确认签署。</li>
</ol>
<p>公私钥加解密说明<br>从以上步骤，我们知道：</p>
<ol>
<li>用公钥加密的密文能且只能用与其唯一配对的私钥才能解开。</li>
<li>如果某份密文被解开，那么肯定是密文的目标信息主体解开的。</li>
<li>私钥因其唯一标识所有者的属性，被用于数字签名，具有法律效力。</li>
</ol>
<p>一。 公私钥生成</p>
<ol>
<li>随机选定两个大素数p, q.</li>
<li>计算公钥和私钥的公共模数 n = pq .</li>
<li>计算模数n的欧拉函数 φ(n) .</li>
<li>选定一个正整数e, 使1 &lt; e &lt; φ(n) , 且e与φ(n)互质.</li>
<li>计算d, 满足 de ≡ 1  (mod φ(n) ), (k为某个正整数).<br>6.n与e决定公钥, n与d决定私钥.</li>
</ol>
<p>二。加解密<br>该过程为小张给小李发消息，公钥为小李的公钥(n &amp; e), 私钥为小李的私钥(n &amp; d).</p>
<ol>
<li>小张欲给小李发一个消息M, 他先把M转换为一个大数m &lt; n, 然后用小李的公钥(n &amp; e)把m加密为另一个大数:<br>c = me    mod n</li>
<li>小李收到小张发来的大数c, 着手解密. 通过自己的私钥(n &amp; d), 得到原来的大数m:<br>m = cd    mod n<br>3.再把m转换为M, 小李即得到小张的原始消息.</li>
</ol>
<p>这个过程之所以能通过, 是因为有如下等式:<br>  cd ≡(me)d ≡med    (mod n)</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://blog.csdn.net/program008/article/details/50563944" target="_blank" rel="noopener">编码和加密算法的使用（MD5、Base64、DES、RSA）</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/加密/">加密</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/解密/">解密</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MD5、SHA1、HMAC、HMAC_SHA1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/02/MD5、SHA1、HMAC、HMAC_SHA1/" class="article-date">
      <time datetime="2018-05-02T07:43:02.000Z" itemprop="datePublished">2018-05-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/02/MD5、SHA1、HMAC、HMAC_SHA1/">MD5、SHA1、HMAC、HMAC_SHA1区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="MD5、SHA1、HMAC、HMAC-SHA1区别"><a href="#MD5、SHA1、HMAC、HMAC-SHA1区别" class="headerlink" title="MD5、SHA1、HMAC、HMAC_SHA1区别"></a>MD5、SHA1、HMAC、HMAC_SHA1区别</h1><h2 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h2><p>MD5 – message-digest algorithm 5(信息-摘要算法)缩写，是一种不可逆的加密算法，对任何字符串都可以加密成一段唯一的固定长度的代码。可以是128位。<br>MD5码可以唯一地代码原信息的特征，通常用于密码的加密存储，数字签名，文件完整性验证等。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * MD5加密  </span></span><br><span class="line"><span class="comment"> *   </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptMD5(<span class="keyword">byte</span> [] data) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">  MessageDigest md5 = MessageDigest.getInstance(KEY_MD5);</span><br><span class="line">  md5.update(data);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">return</span> md5.<span class="title">digest</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SHA1"><a href="#SHA1" class="headerlink" title="SHA1"></a>SHA1</h2><p>SHA(Secure Hash Algorithm,安全散列算法)，较MD5更安全。<br>SHA1是由NISTNSA设计，对长度小于264的输入，产生长度为160bit的散列值，可穷举性(brute-force<br>  )更好。SHA-1是由美国标准技术局（NIST）颁布的国家标准，是一种应用最为广泛的Hash函数算法，也是<br>  目前最先进的加密技术，被政府部门和私营业主用来处理敏感信息。也常用于验证文件有没有被篡改。</p>
  <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptSHA(<span class="keyword">byte</span>[] data) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">  MessageDigest sha = MessageDigest.getInstance(KEY_SHA);</span><br><span class="line">  sha.update(data);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">return</span> sha.<span class="title">digest</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="HMAC-SHA1"><a href="#HMAC-SHA1" class="headerlink" title="HMAC_SHA1"></a>HMAC_SHA1</h2><p>HMAC是密钥相关的哈希运算消息认证码(Hash-based Message Authentication Code, 散列消息鉴别码),HMAC运算利用哈希算法，以一个密钥和一个消息为输入，生产一个消息摘要作为输出。消息鉴别码实现鉴别的原理是，<br>用公开函数和密钥产生一个固定长度的值作为认证标识，用这个标识鉴别消息的完整性。使用一个密钥生成一个<br>固定大小的小数据块，即MAC,并将其加入到消息中，然后传输。接收方利用与发送方共享的密钥进行鉴别认证等。</p>
<p>HMAC_SHA1需要一个密钥，而SHA1不需要。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 初始化HMAC密钥  </span></span><br><span class="line"><span class="comment"> *   </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function">String <span class="title">initMacKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  Keygenerator keyGenerator = KeyGenerator.getInstance(KEY_MAC);</span><br><span class="line"></span><br><span class="line">  SecretKey secretKey = keyGenerator.geterateKey();</span><br><span class="line">  <span class="keyword">return</span> encryptBASE64(secretKey.getEncoded());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * HMAC加密  </span></span><br><span class="line"><span class="comment"> *   </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptHMAC(<span class="keyword">byte</span>[] data, String key) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">  SecretKey secretKey = <span class="keyword">new</span> SecretKeySpec(decryptBASE64(key), KEY_MAC);</span><br><span class="line">  Mac mac = Mac.getInstance(secretKey.getAlgorithm());</span><br><span class="line">  mac.init(secretKey);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">return</span> mac.<span class="title">doFinal</span><span class="params">(data)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CRC"><a href="#CRC" class="headerlink" title="CRC"></a>CRC</h2><p>CRC的全称为CyclicRedundancyCheck，中文名称为循环冗余校验。它是一类重要的线性分组码，编码和解码方法<br>简单，检错和纠错能力强，在通信领域广泛地用于实现差错控制。</p>
<h2 id="BASE64"><a href="#BASE64" class="headerlink" title="BASE64"></a>BASE64</h2><p>按照RFC2045的定义，Base64被定义为：Base64内容传送编码被设计用来把任意序列的8位字节描述为一种<br>不易被人直接识别的形式。（The Base64 Content-Transfer-Encoding is designed to represent<br> brbitrary sequences of octets in a form that need not be humamly readable.）</p>
 <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="markdown">/**  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>BASE64解密  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">*   </span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@param key  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@return  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@throws Exception  </span></span></span><br><span class="line"><span class="comment"><span class="markdown">*/</span></span></span><br><span class="line">public <span class="keyword">static</span> byte[] decryptBASE64(<span class="built_in">String</span> key) throws Exception &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">new</span> BASE64Decoder()).decodeBuffer(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="markdown">/**  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>BASE64加密  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">*   </span></span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@param key  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@return  </span></span></span><br><span class="line"><span class="comment"><span class="markdown"><span class="bullet">* </span>@throws Exception  </span></span></span><br><span class="line"><span class="comment"><span class="markdown">*/</span></span>    </span><br><span class="line">public <span class="keyword">static</span> <span class="built_in">String</span> encryptBASE64(byte[] key) throws Exception &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">new</span> BASE64Encoder()).encodeBuffer(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##　hash算法的作用</p>
<ul>
<li><ol>
<li>文件校验</li>
</ol>
</li>
</ul>
<p>MD5Hash算法的“数字指纹”，使它成为目前应用最广泛的一种文件完整性校验和（Checksum）算法，不少Unix<br>系统有提供计算md5checksum的命令。</p>
<ul>
<li><ol start="2">
<li>数字签名</li>
</ol>
</li>
</ul>
<p>Hash算法也是现代密码体系中的一个重要组成部分，由于非对称算法的运算速度较慢，所以在数字签名协议中，<br>单项散列函数扮演了一个重要的角色。对Hash值，又称”数字摘要”进行数字签名，在统计上可以任务与对文件<br>本身进行数字签名是等效的。</p>
<ul>
<li><ol start="3">
<li>鉴权协议</li>
</ol>
</li>
</ul>
<p><em>完整代码</em></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.MessageDigest;    </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.KeyGenerator;    </span><br><span class="line"><span class="keyword">import</span> javax.crypto.Mac;    </span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;    </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Decoder;    </span><br><span class="line"><span class="keyword">import</span> sun.misc.BASE64Encoder;    </span><br><span class="line"></span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 基础加密组件  </span></span><br><span class="line"><span class="comment"> *   </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> jiaxf  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0  </span></span><br><span class="line"><span class="comment"> */</span>    </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Coder</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY_SHA = <span class="string">"SHA"</span>;    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY_MD5 = <span class="string">"MD5"</span>;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * MAC算法可选以下多种算法  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;  </span></span><br><span class="line"><span class="comment">     * HmacMD5   </span></span><br><span class="line"><span class="comment">     * HmacSHA1   </span></span><br><span class="line"><span class="comment">     * HmacSHA256   </span></span><br><span class="line"><span class="comment">     * HmacSHA384   </span></span><br><span class="line"><span class="comment">     * HmacSHA512  </span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY_MAC = <span class="string">"HmacMD5"</span>;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * BASE64解密  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decryptBASE64(String key) <span class="keyword">throws</span> Exception &#123;    </span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">new</span> BASE64Decoder()).decodeBuffer(key);    </span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * BASE64加密  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function">String <span class="title">encryptBASE64</span><span class="params">(<span class="keyword">byte</span>[] key)</span> <span class="keyword">throws</span> Exception </span>&#123;    </span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">new</span> BASE64Encoder()).encodeBuffer(key);    </span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * MD5加密  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptMD5(<span class="keyword">byte</span>[] data) <span class="keyword">throws</span> Exception &#123;    </span><br><span class="line"></span><br><span class="line">        MessageDigest md5 = MessageDigest.getInstance(KEY_MD5);    </span><br><span class="line">        md5.update(data);    </span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">return</span> md5.<span class="title">digest</span><span class="params">()</span></span>;    </span><br><span class="line"></span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * SHA加密  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptSHA(<span class="keyword">byte</span>[] data) <span class="keyword">throws</span> Exception &#123;    </span><br><span class="line"></span><br><span class="line">        MessageDigest sha = MessageDigest.getInstance(KEY_SHA);    </span><br><span class="line">        sha.update(data);    </span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">return</span> sha.<span class="title">digest</span><span class="params">()</span></span>;    </span><br><span class="line"></span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * 初始化HMAC密钥  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function">String <span class="title">initMacKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;    </span><br><span class="line">        KeyGenerator keyGenerator = KeyGenerator.getInstance(KEY_MAC);    </span><br><span class="line"></span><br><span class="line">        SecretKey secretKey = keyGenerator.generateKey();    </span><br><span class="line">        <span class="keyword">return</span> encryptBASE64(secretKey.getEncoded());    </span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     * HMAC加密  </span></span><br><span class="line"><span class="comment">     *   </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception  </span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encryptHMAC(<span class="keyword">byte</span>[] data, String key) <span class="keyword">throws</span> Exception &#123;    </span><br><span class="line"></span><br><span class="line">        SecretKey secretKey = <span class="keyword">new</span> SecretKeySpec(decryptBASE64(key), KEY_MAC);    </span><br><span class="line">        Mac mac = Mac.getInstance(secretKey.getAlgorithm());    </span><br><span class="line">        mac.init(secretKey);    </span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">return</span> mac.<span class="title">doFinal</span><span class="params">(data)</span></span>;    </span><br><span class="line"></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>测试类</em></p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> *   </span></span><br><span class="line"><span class="comment"> * @author jiaxf</span></span><br><span class="line"><span class="comment"> * @version 1.0  </span></span><br><span class="line"><span class="comment"> * @since 1.0  </span></span><br><span class="line"><span class="comment"> */</span>    </span><br><span class="line"><span class="keyword">public</span> class CoderTest &#123;    </span><br><span class="line"></span><br><span class="line">    @Test    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> test() <span class="keyword">throws</span> Exception &#123;    </span><br><span class="line">        <span class="keyword">String</span> inputStr = <span class="string">"简单加密"</span>;    </span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"原文:/n"</span> + inputStr);    </span><br><span class="line"></span><br><span class="line">        <span class="built_in">byte</span>[] inputData = inputStr.getBytes();    </span><br><span class="line">        <span class="keyword">String</span> code = Coder.encryptBASE64(inputData);    </span><br><span class="line"></span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"BASE64加密后:/n"</span> + code);    </span><br><span class="line"></span><br><span class="line">        <span class="built_in">byte</span>[] output = Coder.decryptBASE64(code);    </span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> outputStr = <span class="keyword">new</span> <span class="keyword">String</span>(output);    </span><br><span class="line"></span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"BASE64解密后:/n"</span> + outputStr);    </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 验证BASE64加密解密一致性    </span></span><br><span class="line">        assertEquals(inputStr, outputStr);    </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 验证MD5对于同一内容加密是否一致    </span></span><br><span class="line">        assertArrayEquals(Coder.encryptMD5(inputData), Coder    </span><br><span class="line">                .encryptMD5(inputData));    </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 验证SHA对于同一内容加密是否一致    </span></span><br><span class="line">        assertArrayEquals(Coder.encryptSHA(inputData), Coder    </span><br><span class="line">                .encryptSHA(inputData));    </span><br><span class="line"></span><br><span class="line">        <span class="keyword">String</span> <span class="built_in">key</span> = Coder.initMacKey();    </span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"Mac密钥:/n"</span> + <span class="built_in">key</span>);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 验证HMAC对于同一内容，同一密钥加密是否一致    </span></span><br><span class="line">        assertArrayEquals(Coder.encryptHMAC(inputData, <span class="built_in">key</span>), Coder.encryptHMAC(    </span><br><span class="line">                inputData, <span class="built_in">key</span>));    </span><br><span class="line"></span><br><span class="line">        BigInteger md5 = <span class="keyword">new</span> BigInteger(Coder.encryptMD5(inputData));    </span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"MD5:/n"</span> + md5.toString(<span class="number">16</span>));    </span><br><span class="line"></span><br><span class="line">        BigInteger sha = <span class="keyword">new</span> BigInteger(Coder.encryptSHA(inputData));    </span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"SHA:/n"</span> + sha.toString(<span class="number">32</span>));    </span><br><span class="line"></span><br><span class="line">        BigInteger mac = <span class="keyword">new</span> BigInteger(Coder.encryptHMAC(inputData, inputStr));    </span><br><span class="line">        System.err.<span class="built_in">println</span>(<span class="string">"HMAC:/n"</span> + mac.toString(<span class="number">16</span>));    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://blog.csdn.net/lplj717/article/details/51828692" target="_blank" rel="noopener">加密算法中BASE64、MD5、SHA、HMAC等之间的区别</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Base64/">Base64</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/md5/">md5</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/加密/">加密</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/算法/">算法</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/解密/">解密</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2018-05-02-Node.js10和npm6发布" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/05/02/2018-05-02-Node.js10和npm6发布/" class="article-date">
      <time datetime="2018-05-02T00:54:19.000Z" itemprop="datePublished">2018-05-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/02/2018-05-02-Node.js10和npm6发布/">2018-05-02-Node.js10和npm6发布</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Node-js10及npm6发布"><a href="#Node-js10及npm6发布" class="headerlink" title="Node.js10及npm6发布"></a>Node.js10及npm6发布</h1><p>Node.js 发布最新版本 Node.js 10.0.0，同时，npm 6 也随之发布。据了解，今年 10 月，Node.js 10.x 将成为长期支持版本，该版本专注于稳定性、扩展支持以及为各类应用提供一个可靠稳定的平台。</p>
<p>Node.js 10.x 将是第一个支持 OpenSSL 1.1.0 的版本。该版本配备了 Google V8 6.6 JavaScript 引擎，性能会增强，错误处理和跟踪诊断能力也将会提升。<br>此版本还将推出 Node.js API（N-API），N-API 是一个稳定的 API 模块，它独立于 V8，这样就不会阻碍模块在不重新编译的情况下运行新版本的 Node.js。</p>
<h2 id="关于-N-API"><a href="#关于-N-API" class="headerlink" title="关于 N-API"></a>关于 N-API</h2><p>N-API 提高了 Node.js 的 ABI 稳定性，有助于模块的部署和维护。<br>Node.js 10 将 ABI 的稳定模块 API（N-API）作为官方支持的 API 层。N-API 旨在解决当今生态系统中的两个问题，一是降低本地模块的维护成本，二是在升级 Node.js 版本时，降低模块使用者之间的摩擦。</p>
<p>升级到最新的 Node.js 版本后，Node.js 版本之间的模块损坏将不再成为 N-API 模块的问题，这对于开发者和消费者来说都是双赢的。为了提高此功能的实用性，N-API 也将被移植到 Node.js 8.x 和 6.x 中，还包括下一版本。</p>
<h2 id="现代化的加密"><a href="#现代化的加密" class="headerlink" title="现代化的加密"></a>现代化的加密</h2><p>Node.js 10.x 是第一代支持 OpenSSL 1.1.0 的版本，Node.js 现在能够充分利用由 OpenSSL 团队在代码质量、清理和现代化上提供的服务。</p>
<p>Node.js 现在可以将其加密支持扩展到对称加密算法 ChaCha20 和身份认证算法 Poly1305 上，它们共同构成了现代加密系统，增加了 Node.js 使用“ AEAD ”密码套件的可能性。<br>伴随着最近 TLS 1.3 规范的完成，网络安全迈出了一大步，OpenSSL 团队正准备发布 1.1.1 版本，其主要特性是支持 TLS 1.3，而支持 OpenSSL 1.1.1 的 Node.js 10 将可以轻松实现 API 和 ABI 的稳定升级。</p>
<h2 id="错误处理能力提升"><a href="#错误处理能力提升" class="headerlink" title="错误处理能力提升"></a>错误处理能力提升</h2><p>Node.js 10.x 在利用错误代码以缓解持续性的错误检验上取得了很好的进展。过去，更改文本里的错误都需要等到 semver 主版本更新后，这也意味着只有等到下一个主版本的 Node.js 才能对错误进行更改，而 Node.js 主版本每六个月发布一次。使用错误代码将可以在不中断应用程序的情况下更新文本。</p>
<h2 id="性能改进"><a href="#性能改进" class="headerlink" title="性能改进"></a>性能改进</h2><p>最新的 V8 在 Promise、异步生成器和阵列性能（array performance）有了很大的改进，Promise 和异步函数的改进消除了异步函数和 desugarded promise 链之间的隔阂，这有利于提高使用 Node.js 构建的应用程序性能。</p>
<h2 id="诊断跟踪和Post-mortem"><a href="#诊断跟踪和Post-mortem" class="headerlink" title="诊断跟踪和Post mortem"></a>诊断跟踪和Post mortem</h2><p>在 Node.js 10 中，新的跟踪事件由 performance API 发布，提高了代码的透明性。此外，它还将引入了新的 API，允许用户在代码运行时按需启用和禁用跟踪事件，从而提高了运行时诊断 Node.js 应用程序问题的灵活性。</p>
<h2 id="Node-js-10-x引入npm6"><a href="#Node-js-10-x引入npm6" class="headerlink" title="Node.js 10.x引入npm6"></a>Node.js 10.x引入npm6</h2><p>Node.js 10.0.0 附带 npm 5.7.x， 但是，预计在 Node.js 10.x 生命周期的早期会更新为 npm 6。第 6 版将侧重于性能、稳定性和安全性，与先前版本的 npm 相比，性能提高 1700％。<br>以后，如果使用具有已知安全问题的代码，npm Registry 的用户会收到警告通知。npm 将自动检查针对 NSP 数据库的安装请求，并在代码包含漏洞时发出警告通知。</p>
<p>有关npm6的更多信息，可访问<a href="https://go.npm.me/npm6" target="_blank" rel="noopener">https://go.npm.me/npm6</a></p>
<blockquote>
<p>注意： Node.js 10 版本可能还会发生其他变动，可参考<a href="https://medium.com/the-node-js-collection/the-node-js-project-introduces-latest-release-line-node-js-10-x-bf07abfa9076" target="_blank" rel="noopener">https://medium.com/the-node-js-collection/the-node-js-project-introduces-latest-release-line-node-js-10-x-bf07abfa9076</a></p>
</blockquote>
<h3 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h3><ol>
<li><a href="https://nodejs.org/en/blog/release/v10.0.0/" target="_blank" rel="noopener">Node.js 10文档</a></li>
<li><a href="http://nodejs.cn/api/" target="_blank" rel="noopener">Node.js API 中文文档</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 Jiaxf
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >用户到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 30;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-70677304-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','f9SxgsuoT3T5zTyGctUR','2.0.0');
        
      }
    </script>

  </div>
</body>
</html>
<a href="https://github.com/jiaxf"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
